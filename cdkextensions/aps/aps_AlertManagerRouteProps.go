package aps

import (
	"github.com/aws/aws-cdk-go/awscdk/v2"
)

// Configuration for the alert manager route.
type AlertManagerRouteProps struct {
	// The receiver that should be the target of alerts that are generated by the node.
	Receiver AlertManagerReceiver `field:"required" json:"receiver" yaml:"receiver"`
	// Times when the route should be active.
	//
	// An empty value means that the route
	// is always active. Additionally, the root node cannot have any active
	// times.
	//
	// The route will send notifications only when active, but otherwise acts
	// normally (including ending the route-matching process if the
	// `continueMatching` option is not set).
	ActiveTimeIntervals *[]TimeInterval `field:"optional" json:"activeTimeIntervals" yaml:"activeTimeIntervals"`
	// Optional child routes to add to the node.
	Children *[]*AlertManagerRouteProps `field:"optional" json:"children" yaml:"children"`
	// Whether an alert should continue matching subsequent sibling nodes.
	ContinueMatching *bool `field:"optional" json:"continueMatching" yaml:"continueMatching"`
	// The labels by which incoming alerts are grouped together.
	//
	// For example,
	// multiple alerts coming in for cluster=A and alertname=LatencyHigh would be
	// batched into a single group.
	GroupByLabels *[]*string `field:"optional" json:"groupByLabels" yaml:"groupByLabels"`
	// How long to wait before sending a notification about new alerts that are added to a group of alerts for which an initial notification has already been sent (usually ~5m or more).
	GroupInterval awscdk.Duration `field:"optional" json:"groupInterval" yaml:"groupInterval"`
	// How long to initially wait to send a notification for a group of alerts.
	//
	// Allows to wait for an inhibiting alert to arrive or collect more initial
	// alerts for the same group (usually ~0s to few minutes).
	GroupWait awscdk.Duration `field:"optional" json:"groupWait" yaml:"groupWait"`
	// A list of matchers that an alert has to fulfill to match the node.
	Matchers *[]AlertManagerMatcher `field:"optional" json:"matchers" yaml:"matchers"`
	// Times when the route should be muted. The root node cannot have any mute times.
	//
	// When a route is muted it will not send any notifications, but otherwise
	// acts normally (including ending the route-matching process if the
	// `continueMatching` option is not set).
	MuteTimeInterval *[]TimeInterval `field:"optional" json:"muteTimeInterval" yaml:"muteTimeInterval"`
	// How long to wait before sending a notification again if it has already been sent successfully for an alert.
	//
	// (Usually ~3h or more).
	RepeatInterval awscdk.Duration `field:"optional" json:"repeatInterval" yaml:"repeatInterval"`
}

